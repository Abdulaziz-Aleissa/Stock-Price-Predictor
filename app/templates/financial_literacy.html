<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Literacy - Stock Price Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --neon-blue: #00d4ff;
            --neon-purple: #b347d9;
            --neon-green: #39ff14;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        [data-theme="light"] {
            --glass-bg: rgba(0, 0, 0, 0.05);
            --glass-border: rgba(0, 0, 0, 0.1);
        }

        body {
            background: linear-gradient(45deg, var(--bg-primary), var(--bg-secondary));
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        /* Animated Background Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--neon-blue);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
            opacity: 0.3;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Futuristic Container */
        .cyber-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Market Selection Modal */
        .market-selector {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            backdrop-filter: blur(10px);
        }

        .selector-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 60px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .selector-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
        }

        .market-options {
            display: flex;
            gap: 30px;
            margin-top: 40px;
        }

        .market-option {
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            padding: 40px 30px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            min-width: 200px;
            position: relative;
            overflow: hidden;
        }

        .market-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .market-option:hover::before {
            left: 100%;
        }

        .market-option:hover {
            transform: translateY(-10px) scale(1.05);
            border-color: var(--neon-blue);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3);
        }

        .market-flag {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .market-name {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .market-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Hero Section with Holographic Effect */
        .hero-section {
            text-align: center;
            padding: 80px 0;
            background: var(--primary-gradient);
            border-radius: 30px;
            margin-bottom: 60px;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(255, 255, 255, 0.05) 2px,
                rgba(255, 255, 255, 0.05) 4px
            );
            animation: scan 4s linear infinite;
        }

        @keyframes scan {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 900;
            color: white;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
        }

        .market-indicator {
            display: inline-block;
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            backdrop-filter: blur(10px);
            font-weight: 600;
            color: white;
            margin-top: 20px;
        }

        /* Navigation Bar */
        .cyber-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .nav-chip {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            padding: 12px 24px;
            border-radius: 50px;
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-chip:hover {
            transform: translateY(-3px);
            background: var(--success-gradient);
            color: white;
            box-shadow: 0 10px 25px rgba(79, 172, 254, 0.4);
        }

        /* Video Section */
        .video-section {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 50px;
            margin-bottom: 50px;
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--secondary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .video-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            position: relative;
        }

        .video-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .video-thumbnail {
            position: relative;
            aspect-ratio: 16/9;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .play-button {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            font-size: 24px;
            transition: all 0.3s ease;
        }

        .play-button:hover {
            background: white;
            transform: scale(1.1);
        }

        .video-info {
            padding: 25px;
        }

        .video-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .video-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Concept Cards Grid */
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .concept-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .concept-card:hover::before {
            transform: scaleX(1);
        }

        .concept-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            padding: 30px;
            position: relative;
        }

        .card-icon {
            width: 60px;
            height: 60px;
            background: var(--success-gradient);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.5;
        }

        .expand-indicator {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 1.5rem;
            color: var(--accent);
            transition: transform 0.3s ease;
        }

        .concept-card.expanded .expand-indicator {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            padding: 0 30px;
        }

        .concept-card.expanded .card-content {
            max-height: 1000px;
            padding: 0 30px 30px;
        }

        .concept-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--neon-blue);
            transition: all 0.3s ease;
        }

        .concept-item:hover {
            transform: translateX(10px);
            background: rgba(0, 212, 255, 0.1);
        }

        .concept-term {
            font-weight: 700;
            color: var(--neon-blue);
            font-size: 1.1rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .concept-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Calculator Section */
        .calculator-section {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 50px;
            margin: 50px 0;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .calculator-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            transition: all 0.3s ease;
        }

        .calculator-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .calculator-name {
            color: var(--neon-green);
            font-weight: 700;
            font-size: 1.3rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            border-radius: 10px;
            padding: 12px 16px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--neon-blue);
            color: var(--text-primary);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .btn-calculate {
            background: var(--warning-gradient);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(67, 233, 123, 0.4);
        }

        .result-box {
            margin-top: 20px;
            padding: 20px;
            background: var(--primary-gradient);
            border-radius: 15px;
            color: white;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-value {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .result-details {
            opacity: 0.9;
            line-height: 1.5;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .market-options {
                flex-direction: column;
                gap: 20px;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .concepts-grid {
                grid-template-columns: 1fr;
            }
            
            .calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .video-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Currency Switcher */
        .currency-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .currency-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .currency-btn.active {
            background: var(--neon-blue);
            color: white;
        }

        .currency-btn:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Animated Background Particles -->
    <div class="particles"></div>

    <!-- Market Selection Modal -->
    <div class="market-selector" id="marketSelector">
        <div class="selector-card">
            <div class="selector-title">
                <i class="fas fa-globe"></i> Choose Your Market
            </div>
            <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 30px;">
                Select your preferred market to get localized financial education content
            </p>
            <div class="market-options">
                <div class="market-option" onclick="selectMarket('saudi')">
                    <div class="market-flag">🇸🇦</div>
                    <div class="market-name">Saudi Arabia</div>
                    <div class="market-desc">Tadawul, SAR currency, local investment options</div>
                </div>
                <div class="market-option" onclick="selectMarket('us')">
                    <div class="market-flag">🇺🇸</div>
                    <div class="market-name">United States</div>
                    <div class="market-desc">NYSE, NASDAQ, USD currency, 401k & IRA</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Currency Switcher -->
    <div class="currency-switcher">
        <div class="currency-btn active" id="sarBtn" onclick="switchCurrency('SAR')">SAR</div>
        <div class="currency-btn" id="usdBtn" onclick="switchCurrency('USD')">USD</div>
    </div>

    <!-- Theme Switch -->
    <div class="theme-switch">
        <div class="switch-track">
            <div class="switch-icons">
                <div class="sun">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                </div>
                <div class="moon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                </div>
            </div>
            <div class="switch-circle"></div>
        </div>
    </div>

    <div class="cyber-container">
        <!-- Navigation -->
        <div class="cyber-nav">
            <a href="{{ url_for('index') }}" class="nav-chip">
                <i class="fas fa-home"></i> Home
            </a>
            {% if current_user.is_authenticated %}
            <a href="{{ url_for('dashboard') }}" class="nav-chip">
                <i class="fas fa-chart-line"></i> Dashboard
            </a>
            {% endif %}
        </div>

        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">
                    <i class="fas fa-brain"></i> Financial Literacy Center
                </h1>
                <p class="hero-subtitle">Master the art of intelligent investing with AI-powered education</p>
                <div class="market-indicator" id="marketIndicator">
                    <i class="fas fa-map-marker-alt"></i> <span id="currentMarket">Loading...</span>
                </div>
            </div>
        </div>

        <!-- Educational Videos Section -->
        <div class="video-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-play-circle"></i> Educational Videos
                </h2>
                <p class="section-subtitle">Learn from expert-curated financial education content</p>
            </div>
            <div class="video-grid" id="videoGrid">
                <!-- Videos will be populated by JavaScript based on selected market -->
            </div>
        </div>

        <!-- Financial Concepts -->
        <div class="concepts-grid" id="conceptsGrid">
            <!-- Concepts will be populated by JavaScript based on selected market -->
        </div>

        <!-- Interactive Calculators -->
        <div class="calculator-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-calculator"></i> Smart Financial Calculators
                </h2>
                <p class="section-subtitle">Interactive tools to plan your financial future</p>
            </div>
            <div class="calculator-grid">
                <!-- Compound Interest Calculator -->
                <div class="calculator-card">
                    <h4 class="calculator-name">
                        <i class="fas fa-chart-line"></i> Compound Interest Calculator
                    </h4>
                    <div class="mb-3">
                        <label class="form-label">Initial Investment</label>
                        <input type="number" class="form-control" id="principal" value="10000" placeholder="Enter amount">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Monthly Contribution</label>
                        <input type="number" class="form-control" id="monthly" value="500" placeholder="Monthly addition">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Annual Interest Rate (%)</label>
                        <input type="number" class="form-control" id="rate" value="7" step="0.1" placeholder="Expected return">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Investment Period (Years)</label>
                        <input type="number" class="form-control" id="years" value="30" placeholder="Time horizon">
                    </div>
                    <button class="btn-calculate" onclick="calculateCompound()">
                        <i class="fas fa-rocket"></i> Calculate Growth
                    </button>
                    <div id="compoundResult" class="result-box">
                        <div class="result-value"></div>
                        <div class="result-details"></div>
                    </div>
                </div>

                <!-- P/E Ratio Calculator -->
                <div class="calculator-card">
                    <h4 class="calculator-name">
                        <i class="fas fa-balance-scale"></i> P/E Ratio Analyzer
                    </h4>
                    <div class="mb-3">
                        <label class="form-label">Stock Price</label>
                        <input type="number" class="form-control" id="stockPrice" value="100" placeholder="Current price">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Earnings Per Share</label>
                        <input type="number" class="form-control" id="eps" value="5" step="0.01" placeholder="Annual EPS">
                    </div>
                    <button class="btn-calculate" onclick="calculatePE()">
                        <i class="fas fa-chart-bar"></i> Analyze Valuation
                    </button>
                    <div id="peResult" class="result-box">
                        <div class="result-value"></div>
                        <div class="result-details"></div>
                    </div>
                </div>

                <!-- Emergency Fund Calculator -->
                <div class="calculator-card">
                    <h4 class="calculator-name">
                        <i class="fas fa-shield-alt"></i> Emergency Fund Planner
                    </h4>
                    <div class="mb-3">
                        <label class="form-label">Monthly Expenses</label>
                        <input type="number" class="form-control" id="monthlyExpenses" value="4000" placeholder="Total monthly costs">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Job Stability</label>
                        <select class="form-control" id="jobStability">
                            <option value="3">Stable job (3 months)</option>
                            <option value="6">Average stability (6 months)</option>
                            <option value="9">Unstable job (9 months)</option>
                        </select>
                    </div>
                    <button class="btn-calculate" onclick="calculateEmergencyFund()">
                        <i class="fas fa-life-ring"></i> Calculate Fund
                    </button>
                    <div id="emergencyResult" class="result-box">
                        <div class="result-value"></div>
                        <div class="result-details"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentMarket = 'saudi'; // Default to Saudi Arabia
        let currentCurrency = 'SAR';

        // Market data
        const marketData = {
            saudi: {
                name: 'Saudi Arabia Market',
                flag: '🇸🇦',
                currency: 'SAR',
                concepts: [
                    {
                        icon: 'fas fa-book-open',
                        title: 'Basic Financial Concepts',
                        subtitle: 'Understanding Tadawul, Islamic finance, and Sharia-compliant investments',
                        items: [
                            {
                                term: 'Tadawul Stocks',
                                icon: 'fas fa-chart-line',
                                description: 'Shares of Saudi companies listed on the Saudi Stock Exchange (Tadawul). All stocks are Sharia-compliant.'
                            },
                            {
                                term: 'Sukuk (Islamic Bonds)',
                                icon: 'fas fa-university',
                                description: 'Sharia-compliant investment certificates that represent ownership in underlying assets rather than debt.'
                            },
                            {
                                term: 'REITs (صناديق الاستثمار العقاري)',
                                icon: 'fas fa-building',
                                description: 'Real Estate Investment Trusts that allow you to invest in income-generating real estate portfolios.'
                            },
                            {
                                term: 'Commodity Trading',
                                icon: 'fas fa-oil-can',
                                description: 'Investment in commodities like oil, gold, and precious metals, fundamental to Saudi economy.'
                            },
                            {
                                term: 'Islamic Finance Principles',
                                icon: 'fas fa-mosque',
                                description: 'All investments follow Islamic principles: no interest (riba), gambling (maysir), or excessive uncertainty (gharar).'
                            }
                        ]
                    },
                    {
                        icon: 'fas fa-piggy-bank',
                        title: 'Investment Fundamentals',
                        subtitle: 'Saudi investment accounts, GOSI benefits, and local investment strategies',
                        items: [
                            {
                                term: 'GOSI (التأمينات الاجتماعية)',
                                icon: 'fas fa-shield-alt',
                                description: 'General Organization for Social Insurance - mandatory retirement savings for Saudi employees with employer matching.'
                            },
                            {
                                term: 'Bank Investment Accounts',
                                icon: 'fas fa-university',
                                description: 'Sharia-compliant investment accounts offered by Saudi banks like Al Rajhi, SNB, and SABB.'
                            },
                            {
                                term: 'Dollar-Cost Averaging (متوسط التكلفة)',
                                icon: 'fas fa-calendar-alt',
                                description: 'Investing fixed amounts regularly in SAR to reduce impact of market volatility over time.'
                            },
                            {
                                term: 'Asset Allocation',
                                icon: 'fas fa-pie-chart',
                                description: 'Diversifying between Saudi stocks, international Sharia funds, real estate, and commodities.'
                            },
                            {
                                term: 'Zakat Considerations',
                                icon: 'fas fa-hand-holding-heart',
                                description: 'Remember to calculate and pay 2.5% Zakat on your investment gains and savings annually.'
                            }
                        ]
                    },
                    {
                        icon: 'fas fa-chart-area',
                        title: 'Saudi Market Education',
                        subtitle: 'Tadawul operations, Saudi economic sectors, and market analysis',
                        items: [
                            {
                                term: 'Tadawul Exchange',
                                icon: 'fas fa-building',
                                description: 'Saudi Stock Exchange operating Sunday-Thursday, 10:00 AM - 3:00 PM. Market cap over 10 trillion SAR.'
                            },
                            {
                                term: 'MSCI EM Inclusion',
                                icon: 'fas fa-globe',
                                description: 'Saudi Arabia included in MSCI Emerging Markets index, attracting international investment.'
                            },
                            {
                                term: 'Vision 2030 Sectors',
                                icon: 'fas fa-eye',
                                description: 'Key growth sectors: renewable energy, tourism, entertainment, technology, and healthcare.'
                            },
                            {
                                term: 'Oil Impact Analysis',
                                icon: 'fas fa-oil-can',
                                description: 'Understanding how oil prices affect Saudi stocks, especially petrochemical and banking sectors.'
                            },
                            {
                                term: 'Saudi GAAP vs IFRS',
                                icon: 'fas fa-file-invoice-dollar',
                                description: 'Saudi companies report using International Financial Reporting Standards (IFRS) for transparency.'
                            }
                        ]
                    }
                ],
                videos: [
                    {
                        title: 'Tadawul Trading Basics',
                        description: 'Complete guide to trading on Saudi Stock Exchange',
                        thumbnail: 'saudi-trading',
                        duration: '15:30'
                    },
                    {
                        title: 'Islamic Investment Principles',
                        description: 'Understanding Sharia-compliant investing in Saudi Arabia',
                        thumbnail: 'islamic-finance',
                        duration: '12:45'  
                    },
                    {
                        title: 'Vision 2030 Investment Opportunities',
                        description: 'Sectors to watch under Saudi Vision 2030',
                        thumbnail: 'vision-2030',
                        duration: '18:20'
                    },
                    {
                        title: 'GOSI and Retirement Planning',
                        description: 'Maximizing your Saudi social insurance benefits',
                        thumbnail: 'gosi-guide',
                        duration: '10:15'
                    }
                ]
            },
            us: {
                name: 'United States Market',
                flag: '🇺🇸',
                currency: 'USD',
                concepts: [
                    {
                        icon: 'fas fa-book-open',
                        title: 'Basic Financial Concepts',
                        subtitle: 'Understanding securities, risk vs return, and diversification',
                        items: [
                            {
                                term: 'Stocks',
                                icon: 'fas fa-chart-line',
                                description: 'Shares of ownership in a company. When you buy stock, you become a partial owner and have a claim on the company\'s assets and earnings.'
                            },
                            {
                                term: 'Bonds',
                                icon: 'fas fa-university',
                                description: 'Debt securities where you lend money to a government or corporation for a fixed period at a fixed interest rate.'
                            },
                            {
                                term: 'ETFs',
                                icon: 'fas fa-layer-group',
                                description: 'Exchange-Traded Funds that track an index, commodity, bonds, or basket of assets like an index fund.'
                            },
                            {
                                term: 'Risk vs Return',
                                icon: 'fas fa-balance-scale',
                                description: 'Higher potential returns typically come with higher risk. There\'s no such thing as a guaranteed high-return, low-risk investment.'
                            },
                            {
                                term: 'Diversification',
                                icon: 'fas fa-random',
                                description: 'Spreading investments across different asset classes, sectors, and geographic regions to reduce risk.'
                            }
                        ]
                    },
                    {
                        icon: 'fas fa-piggy-bank',
                        title: 'Investment Fundamentals',
                        subtitle: 'Account types, dollar-cost averaging, and asset allocation',
                        items: [
                            {
                                term: '401(k) Accounts',
                                icon: 'fas fa-briefcase',
                                description: 'Employer-sponsored retirement accounts with tax advantages. Many employers offer matching contributions.'
                            },
                            {
                                term: 'IRA Accounts',
                                icon: 'fas fa-coins',
                                description: 'Individual Retirement Accounts - Traditional (tax-deferred) or Roth (tax-free growth) options available.'
                            },
                            {
                                term: 'Dollar-Cost Averaging',
                                icon: 'fas fa-calendar-alt',
                                description: 'Investing a fixed amount regularly regardless of market conditions to reduce the impact of volatility.'
                            },
                            {
                                term: 'Asset Allocation',
                                icon: 'fas fa-pie-chart',
                                description: 'The mix of stocks, bonds, and other investments in your portfolio based on your goals and risk tolerance.'
                            },
                            {
                                term: 'Time Horizon',
                                icon: 'fas fa-clock',
                                description: 'How long you plan to hold investments before needing the money affects your investment strategy.'
                            }
                        ]
                    },
                    {
                        icon: 'fas fa-chart-area',
                        title: 'Stock Market Education',
                        subtitle: 'How exchanges work, financial statements, and key ratios',
                        items: [
                            {
                                term: 'Stock Exchanges',
                                icon: 'fas fa-building',
                                description: 'NYSE (traditional + electronic) and NASDAQ (fully electronic) are the major U.S. exchanges where stocks are traded.'
                            },
                            {
                                term: 'Financial Statements',
                                icon: 'fas fa-file-invoice-dollar',
                                description: 'Income Statement (revenue/expenses), Balance Sheet (assets/liabilities), and Cash Flow Statement show company health.'
                            },
                            {
                                term: 'P/E Ratio',
                                icon: 'fas fa-calculator',
                                description: 'Price-to-Earnings ratio compares stock price to earnings per share to evaluate if a stock is over/undervalued.'
                            },
                            {
                                term: 'Market Volatility',
                                icon: 'fas fa-wave-square',
                                description: 'Stock prices fluctuate due to economic conditions, company performance, and investor sentiment.'
                            },
                            {
                                term: 'Market Cycles',
                                icon: 'fas fa-sync-alt',
                                description: 'Markets go through bull (rising) and bear (falling) cycles - understanding this helps with long-term investing.'
                            }
                        ]
                    }
                ],
                videos: [
                    {
                        title: 'Stock Market Fundamentals',
                        description: 'Complete beginner\'s guide to US stock market investing',
                        thumbnail: 'us-stocks',
                        duration: '20:15'
                    },
                    {
                        title: '401k vs IRA Explained',
                        description: 'Understanding retirement account options in the US',
                        thumbnail: 'retirement-accounts',
                        duration: '16:30'
                    },
                    {
                        title: 'ETF Investing Strategy',
                        description: 'Building a diverse portfolio with exchange-traded funds',
                        thumbnail: 'etf-guide',
                        duration: '14:45'
                    },
                    {
                        title: 'Tax-Efficient Investing',
                        description: 'Minimizing taxes on your investment gains',
                        thumbnail: 'tax-strategies',
                        duration: '12:20'
                    }
                ]
            }
        };

        // Initialize particles
        function createParticles() {
            const particlesContainer = document.querySelector('.particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Market selection function
        function selectMarket(market) {
            currentMarket = market;
            currentCurrency = marketData[market].currency;
            
            // Hide market selector
            document.getElementById('marketSelector').style.display = 'none';
            
            // Update currency buttons
            updateCurrencyButtons();
            
            // Update content
            updateMarketContent();
            
            // Store preference
            localStorage.setItem('selectedMarket', market);
        }

        // Currency switching
        function switchCurrency(currency) {
            currentCurrency = currency;
            updateCurrencyButtons();
            // Update calculator labels and results if needed
        }

        function updateCurrencyButtons() {
            document.querySelectorAll('.currency-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(currentCurrency.toLowerCase() + 'Btn').classList.add('active');
        }

        // Update page content based on selected market
        function updateMarketContent() {
            const data = marketData[currentMarket];
            
            // Update market indicator
            document.getElementById('currentMarket').textContent = data.name;
            
            // Update concepts
            updateConcepts(data.concepts);
            
            // Update videos
            updateVideos(data.videos);
        }

        function updateConcepts(concepts) {
            const grid = document.getElementById('conceptsGrid');
            grid.innerHTML = '';
            
            concepts.forEach(concept => {
                const card = createConceptCard(concept);
                grid.appendChild(card);
            });
        }

        function createConceptCard(concept) {
            const card = document.createElement('div');
            card.className = 'concept-card';
            card.onclick = () => toggleCard(card);
            
            const items = concept.items.map(item => `
                <div class="concept-item">
                    <div class="concept-term">
                        <i class="${item.icon}"></i> ${item.term}
                    </div>
                    <div class="concept-description">${item.description}</div>
                </div>
            `).join('');
            
            card.innerHTML = `
                <div class="card-header">
                    <div class="card-icon">
                        <i class="${concept.icon}"></i>
                    </div>
                    <h3 class="card-title">${concept.title}</h3>
                    <p class="card-subtitle">${concept.subtitle}</p>
                    <i class="fas fa-chevron-down expand-indicator"></i>
                </div>
                <div class="card-content">
                    ${items}
                </div>
            `;
            
            return card;
        }

        function updateVideos(videos) {
            const grid = document.getElementById('videoGrid');
            grid.innerHTML = '';
            
            videos.forEach(video => {
                const card = createVideoCard(video);
                grid.appendChild(card);
            });
        }

        function createVideoCard(video) {
            const card = document.createElement('div');
            card.className = 'video-card';
            
            card.innerHTML = `
                <div class="video-thumbnail" onclick="playVideo('${video.thumbnail}')">
                    <div class="play-button">
                        <i class="fas fa-play"></i>
                    </div>
                </div>
                <div class="video-info">
                    <h4 class="video-title">${video.title}</h4>
                    <p class="video-description">${video.description}</p>
                    <small style="color: var(--text-secondary);">
                        <i class="fas fa-clock"></i> ${video.duration}
                    </small>
                </div>
            `;
            
            return card;
        }

        function playVideo(videoId) {
            // In a real implementation, this would open a video player
            alert(`Playing video: ${videoId}\n\nThis would open the educational video in a modal or redirect to the video platform.`);
        }

        // Card toggle functionality
        function toggleCard(card) {
            card.classList.toggle('expanded');
        }

        // Calculator functions
        function calculateCompound() {
            const principal = parseFloat(document.getElementById('principal').value) || 0;
            const monthly = parseFloat(document.getElementById('monthly').value) || 0;
            const rate = parseFloat(document.getElementById('rate').value) / 100 || 0;
            const years = parseFloat(document.getElementById('years').value) || 0;
            
            const months = years * 12;
            const monthlyRate = rate / 12;
            
            // Future value of initial investment
            const futureValuePrincipal = principal * Math.pow(1 + monthlyRate, months);
            
            // Future value of monthly contributions
            let futureValueMonthly = 0;
            if (monthlyRate > 0) {
                futureValueMonthly = monthly * ((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate);
            } else {
                futureValueMonthly = monthly * months;
            }
            
            const totalFutureValue = futureValuePrincipal + futureValueMonthly;
            const totalContributions = principal + (monthly * months);
            const totalEarnings = totalFutureValue - totalContributions;
            
            const currencySymbol = currentCurrency === 'SAR' ? 'ر.س' : '$';
            
            const resultBox = document.getElementById('compoundResult');
            resultBox.style.display = 'block';
            resultBox.querySelector('.result-value').textContent = 
                `Final Value: ${currencySymbol}${totalFutureValue.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            resultBox.querySelector('.result-details').innerHTML = `
                <div>Total Contributions: ${currencySymbol}${totalContributions.toLocaleString('en-US', {maximumFractionDigits: 0})}</div>
                <div>Total Earnings: ${currencySymbol}${totalEarnings.toLocaleString('en-US', {maximumFractionDigits: 0})}</div>
                <div>Growth Multiple: ${(totalFutureValue / totalContributions).toFixed(2)}x</div>
            `;
        }

        function calculatePE() {
            const price = parseFloat(document.getElementById('stockPrice').value) || 0;
            const eps = parseFloat(document.getElementById('eps').value) || 0;
            
            if (eps === 0) {
                alert('Earnings per share cannot be zero');
                return;
            }
            
            const peRatio = price / eps;
            let interpretation = '';
            
            if (peRatio < 15) {
                interpretation = 'Potentially undervalued - Low P/E may indicate good value or poor growth prospects';
            } else if (peRatio < 25) {
                interpretation = 'Fairly valued - Moderate P/E suggests reasonable valuation';
            } else {
                interpretation = 'Potentially overvalued - High P/E may indicate high growth expectations or overvaluation';
            }
            
            const resultBox = document.getElementById('peResult');
            resultBox.style.display = 'block';
            resultBox.querySelector('.result-value').textContent = `P/E Ratio: ${peRatio.toFixed(2)}`;
            resultBox.querySelector('.result-details').textContent = interpretation;
        }

        function calculateEmergencyFund() {
            const expenses = parseFloat(document.getElementById('monthlyExpenses').value) || 0;
            const months = parseInt(document.getElementById('jobStability').value) || 3;
            
            const recommendedAmount = expenses * months;
            const monthlySavingsGoal = recommendedAmount / 12;
            
            const currencySymbol = currentCurrency === 'SAR' ? 'ر.س' : '$';
            
            const resultBox = document.getElementById('emergencyResult');
            resultBox.style.display = 'block';
            resultBox.querySelector('.result-value').textContent = 
                `Recommended Amount: ${currencySymbol}${recommendedAmount.toLocaleString('en-US', {maximumFractionDigits: 0})}`;
            resultBox.querySelector('.result-details').innerHTML = `
                <div>Coverage: ${months} months of expenses</div>
                <div>Monthly Savings Goal: ${currencySymbol}${monthlySavingsGoal.toFixed(0)} (if saving over 1 year)</div>
            `;
        }

        // Theme switching
        document.addEventListener('DOMContentLoaded', function() {
            const themeSwitch = document.querySelector('.theme-switch');
            const html = document.documentElement;
            
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme') || 'dark';
            html.setAttribute('data-theme', savedTheme);
            
            themeSwitch.addEventListener('click', function() {
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                html.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
            });

            // Initialize particles
            createParticles();
            
            // Check for saved market preference
            const savedMarket = localStorage.getItem('selectedMarket');
            if (savedMarket && marketData[savedMarket]) {
                selectMarket(savedMarket);
            }
        });
    </script>
</body>
</html>